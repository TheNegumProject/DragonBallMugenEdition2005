; Player's constants.
; Format (case insensitive):
; [groupname]        
; constname = "value"

[Data]
life = 2100          ;Amount of life to start with
attack = 110         ;100% attack power (more is stronger)
defence = 120        ;100% defensive power (more is stronger)
power = 3000
fall.defence_up = 50 ;Def goes up by 50% everytime player is hit on ground
liedown.time = 60    ;Time player takes before getting up from HIT_LIEDOWN
airjuggle = 15       ;Can do 15 points of juggling
sparkno = 2          ;Default spark number
guard.sparkno = 40   ;Default guard spark number
KO.echo = 0          ;1 to enable echo on KO
volume = 100         ;Volume offset (negative for softer)
IntPersistIndex = 1
;FloatPersistIndex = 1

[Size]
xscale = 1           ;Horizontal scaling factor.
yscale = 1           ;Vertical scaling factor.
ground.back = 15     ;Player width (back, ground)
ground.front = 15    ;Player width (front, ground)
air.back = 12        ;Player width (back, air)
air.front = 12       ;Player width (front, air)
z.width = 3          ;Player width (into and out)
height = 60	     ;Height of player (for opponent to jump over)
attack.width = 4,4   ;Default attack width: back, front
attack.dist = 160    ;Default attack distance
proj.attack.dist = 90 ;Default attack distance for projectiles
proj.doscale = 0     ;Set to 1 to scale projectiles too   

[Velocity]
walk.fwd  = 2.3      ;Walk forward
walk.back = -2.2     ;Walk backward
run.fwd  = 6.6, 0    ;Run forward (x, y)  - if y<0, player will hop
run.back = -6.5,-3.8 ;Run backward (x, y) - if y=0, player will run
jump.neu = 0,-8.5    ;Neutral jumping velocity (x, y)
jump.back = -3.55    ;Jump back Speed (x, y)
jump.fwd = 3.5       ;Jump forward Speed (x, y)
runjump.back = -3.55,-8.5 ;Running jump speeds (opt)
runjump.fwd = 5,-8.5      ;.
airjump.neu = 0,-8.5      ;.
airjump.back = -3.55,-8.5 ;Air jump speeds (opt)
airjump.fwd = 3.5,-8.5    ;.

[Movement]
airjump.num = 1      ;Number of air jumps allowed (opt)
airjump.height = 35  ;Minimum distance from ground before you can air jump (opt)
yaccel = .41         ;Vertical acceleration
stand.friction = .85  ;Friction coefficient when standing
crouch.friction = .82 ;Friction coefficient when crouching

;---------------------------------------------------------------------------
; Format:
; [Statedef STATENO]
; type = ?      S/C/A/L  stand/crouch/air/liedown
; movetype = ?  I/A/H    idle/attack/gethit
; physics = ?   S/C/A/N  stand/crouch/air/none
; juggle = ?             air juggle points move requires
;
; [State STATENO, ?]     ? - any number you choose
; type = ?
; ...

;---------------------------------------------------------------------------
; LOSE (Time over)
[Statedef 170]
type = S
ctrl = 0
anim = 170
velset = 0,0,0

[State 170, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
; WIN
[Statedef 180]
type = S

[State 180, 1]
type = ChangeState
trigger1 = Life = 1000
value = 182

[State 180, 1]
type = ChangeState
trigger1 = Life < 1000
value = 181

;---------------------------------------------------------------------------
; WIN1
[Statedef 181]
type = S
ctrl = 0
velset = 0,0,0

[State 180, 1]
type = changeanim
triggerall = var(1) = 0
trigger1 = time = 0
value = 180

[State 180, 1]
type = changeanim
triggerall = var(1) = 1
trigger1 = time = 0
value = 181

[State 181, 1]
type = NotHitBy
trigger1 = Time >= 0
value = SCA
time = 1

;---------------------------------------------------------------------------
; STAND_A
[Statedef 200000000]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
poweradd = 20                   

[State 200, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 200

[State 200, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3200

[State 200, 1]
type = playsnd
trigger1 = time = 0
value = 12,0


[State 200, 1]
type = HitDef
triggerall = Var(1) = 0
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 23                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 7,8                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = Low                 
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -1             
airguard.velocity = -1    
air.velocity = -1,-3           

[State 200, 1]
type = HitDef
triggerall = Var(1) = 1
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 43                   
animtype = Hard                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 8,9                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = Low               
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -1            
airguard.velocity = -1    
air.velocity = -1,-3           

[State 200, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; STAND_B
[Statedef 20100000]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
poweradd = 40                   

[State 201, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 201

[State 201, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3201

[State 200, 1]
type = playsnd
trigger1 = time = 0
value = 12,0

[State 201, 1]
type = HitDef
triggerall = Var(1) = 0
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 33                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 7,8                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = Low                 
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -1             
airguard.velocity = -1  
air.velocity = -1,-3           

[State 201, 1]
type = HitDef
triggerall = Var(1) = 1
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 53                   
animtype = Hard                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 8,9                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = Low               
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -1             
airguard.velocity = -1     
air.velocity = -1,-3           

[State 201, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; STAND_C
[Statedef 2020000000]
type    = S                      
movetype= A                      
physics = S                      
juggle  = 1                      
velset = 0,0                     
ctrl = 0                         
poweradd = 60                   

[State 202, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 202

[State 202, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3202

[State 200, 1]
type = playsnd
trigger1 = time = 0
value = 13,0


[State 202, 1]
type = HitDef
triggerall = Var(1) = 0
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 63                   
animtype = Light                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 7,8                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = Low                 
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -2             
air.velocity = -2,-3           

[State 202, 1]
type = HitDef
triggerall = Var(1) = 1
trigger1 = AnimElem = 2
attr = S, NA                     
damage    = 73                   
animtype = Hard                 
guardflag = MA                   
hitflag = MAF                    
priority = 3
pausetime = 8,9                  
numhits = 1                      
sparkno = 0                   
sparkxy = -10,-70                
hitsound = S5,0                   
guardsound = 6,0                 
ground.type = High               
ground.slidetime = 5             
ground.hittime  = 11             
ground.velocity = -2             
air.velocity = -2,-3
fall = 1           

[State 202, 7]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
; STAND_B
[Statedef 21000000]
type    = S
movetype= A
physics = S
juggle  = 4
poweradd= 60
ctrl = 0
velset = 0,0,0

[State 210, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 210

[State 210, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3210

[State 210, 1]
type = playsnd
trigger1 = time = 0
value = 13,0

[State 210, 2]
type = HitDef
triggerall = Var(1) = 0
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Light
damage    = 55
guardflag = MA
pausetime = 11,11
sparkxy = -10,-70
hitsound   = S5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 30
ground.velocity = -2
air.velocity = -2,-3
fall = 1

[State 210, 2]
type = HitDef
triggerall = Var(1) = 1
trigger1 = AnimElem = 2
attr = S, NA
animtype  = Hard
damage    = 85
guardflag = MA
pausetime = 5,5
sparkxy = -10,-70
hitsound   = S5,1
guardsound = 6,0
ground.type = Low
ground.slidetime = 12
ground.hittime  = 50
ground.velocity = -2
air.velocity = -2,-3
fall = 1

[State 210, 3]
type = ChangeState
trigger1 = AnimTime = 0
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_A
[Statedef 400]
type    = C
movetype= A
physics = C
juggle  = 6
poweradd= 15
ctrl = 0

[State 400, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 400

[State 400, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3400

[State 400, 1]
type = playsnd
trigger1 = time = 0
value = 12,0

[State 400, 2]
type = HitDef
triggerall = Var(1) = 0
trigger1 = animelem = 2
attr = C, NA
damage    = 23
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAFD
guardflag = L
pausetime = 10,12
sparkxy = -2,-41
hitsound   = S5,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -4
air.velocity = -1.3,-3
down.velocity = -4,0
down.hittime = 20

[State 400, 2]
type = HitDef
triggerall = Var(1) = 0
trigger1 = animelem = 2
attr = C, NA
damage    = 23
animtype  = Light
getpower  = 10
givepower = 8
hitflag = MAFD
guardflag = L
pausetime = 5,5
sparkxy = -2,-41
hitsound   = S5,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -4
air.velocity = -1.3,-3
down.velocity = -4,0
down.hittime = 20

[State 400, 2]
type = HitDef
triggerall = Var(1) = 1
trigger1 = animelem = 2
attr = C, NA
damage    = 43
animtype  = Hard
getpower  = 10
givepower = 8
hitflag = MAFD
guardflag = L
pausetime = 7,7
sparkxy = -2,-41
hitsound   = S5,0
guardsound = 6,0
ground.type = Low
ground.slidetime = 4
ground.hittime  = 15
ground.velocity = -4
air.velocity = -1.3,-3
down.velocity = -4,0
down.hittime = 20


[State 400, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;CROUCH_Z
[Statedef 410]
type    = C
movetype= A
physics = C
juggle  = 7
poweradd= 30
velset = ifelse(var(1),14,8)
ctrl = 0

[State 410, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 410

[State 410, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3410

[State 410, 2]
type = PlaySnd
trigger1 = Time = 0
value = 13,0

[State 410, 3]
type = HitDef
triggerall = Var(1) = 0
trigger1 = animelem = 2
attr = C, NA
damage    = 62
getpower  = 40
givepower = 40
hitflag = MAFD
guardflag = L
pausetime = 5,5
sparkxy = -5,-10
sparkno = 1
hitsound   = S5,1
guardsound = 6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -1.5,-2
air.velocity = -1.2,-3
guard.velocity = -5
fall = 1

[State 410, 3]
type = HitDef
triggerall = Var(1) = 1
trigger1 = animelem = 2
attr = C, NA
damage    = 82
getpower  = 40
givepower = 40
hitflag = MAFD
guardflag = L
pausetime = 12,12
sparkxy = -5,-10
sparkno = 1
hitsound   = S5,1
guardsound = 6,0
ground.type = Trip
ground.slidetime = 10
ground.hittime  = 15
ground.velocity = -2,-4
air.velocity = -2,-4
guard.velocity = -7
fall = 1

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 11
ctrl = 1

;---------------------------------------------------------------------------
;JUMP_A
[Statedef 600]
type    = A
movetype= A
physics = A
juggle  = 2
poweradd= 11
ctrl = 0

[State 600, 1]
type = changeanim
triggerall = Var(1) = 0
trigger1 = time = 0
value = 600

[State 600, 1]
type = changeanim
triggerall = Var(1) = 1
trigger1 = time = 0
value = 3600

[State 600, 1]
type = playsnd
trigger1 = time = 0
value = 12,0

[State 600, 2]
type = HitDef
triggerall = Var(1) = 0
trigger1 = animelem = 2
attr = A, NA
damage    = 12
getpower  = 10
givepower = 10
guardflag = HA
priority = 3
pausetime = 7,8
sparkxy = -10,-58
hitsound   = S5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, 2]
type = HitDef
triggerall = Var(1) = 1
trigger1 = animelem = 2
attr = A, NA
damage    = 32
getpower  = 10
givepower = 10
guardflag = HA
priority = 3
pausetime = 7,8
sparkxy = -10,-58
hitsound   = S5,0
guardsound = 6,0
ground.type = High
ground.slidetime = 5
ground.hittime  = 5
ground.velocity = -4
air.velocity = -1.3,-3

[State 600, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;---------------------------------------------------------------------------
;JUMP_B
[Statedef 610]
type    = A
movetype= A
physics = A
juggle  = 3
poweradd= 55
ctrl = 0
anim = 610

[State 610, 1]
type = changeanim
triggerall = var(1) = 0
trigger1 = time = 0
value = 610

[State 610, 1]
type = changeanim
triggerall = var(1) = 1
trigger1 = time = 0
value = 3610

[State 610, 2]
type = PlaySnd
trigger1 = Time = 0
value = 13, 0

[State 610, 3]
type = HitDef
triggerall = var(1) = 0
trigger1 = animelem = 2
attr = A, NA
damage    = 70
getpower  = 50
givepower = 25
guardflag = HA
priority = 3
pausetime = 7,8
sparkxy = -10,-51
hitsound   = S5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -4
air.velocity = -1.3,-3

[State 610, 3]
type = HitDef
triggerall = var(1) = 1
trigger1 = animelem = 2
attr = A, NA
damage    = 90
getpower  = 50
givepower = 25
guardflag = HA
priority = 3
pausetime = 5,6
sparkxy = -10,-51
hitsound   = S5,1
guardsound = 6,0
ground.type = High
ground.slidetime = 9
ground.hittime  = 9
ground.velocity = -7, 5
air.velocity = -7,5
fall = 1

[State 610, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 50
ctrl = 1

;-------------------
;Power Up
[Statedef 300]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 300

[State 1900, GoUpAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = Anim != 304
trigger1 = pos Y < 0
value = 304

[State 310, 2]
type = poweradd
trigger1 = Time >= 0
value = 2

[State 300,blink]
type = PalFX
triggerall = (Time >= 0) && (Power < 4000)
trigger1 = (GameTime%50) = 0
time = 2
add = 64,64,64

[State 2000, 1]
type = EnvShake
trigger1 = TimeMod = 4,0
ampl = 2
time = 4

[State 310, 3]
type = ChangeState
trigger1 = command != "power"
value = 0
ctrl = 1

[State 310, 3]
type = ChangeState
trigger1 = time = 150
trigger2 = power >= 2000
value = 301
ctrl = 1

;-----

;Power Up
[Statedef 301]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 301

[State 1900, GoUpAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = Anim != 304
trigger1 = pos Y < 0
value = 304

[State 300, energy]
type = Explod
trigger1 = Time = 0
pos = 4,5
anim = 4001
ID = 4001
sprpriority = -1
bindtime = -1
removetime = -1
ownpal = 1

[State 300,end]
type = RemoveExplod
ID = 4001
trigger1 = (command != "power") || (life = 0)

[State 300,blink]
type = PalFX
triggerall = (Time >= 0) && (Power < 4000)
trigger1 = (GameTime%25) = 0
time = 5
add = 64,64,64

[State 300, lightning]
type = Explod
trigger1 = power = [2500,2504] 
trigger2 = power > 2500 && time = 0
anim = 4003
ID = 4003
sprpriority = 2
bindtime = -1
removetime = -1
ownpal = 1

[State 300,end]
type = RemoveExplod
ID = 4003
trigger1 = (command != "power") || (life = 0)

[State 310, 2]
type = poweradd
trigger1 = Time >= 0 && Power < 4000
value = 5

[State 2000, 1]
type = EnvShake
;trigger1 = time = 0
trigger1 = TimeMod = 4,0 && power < 2500 
ampl = 3
time = 4

[State 2000, 1]
type = EnvShake
;trigger1 = time = 0
trigger1 = TimeMod = 4,0 && power >= 2500
ampl = 5
time = 4

[State 310, 3]
type = ChangeState
trigger1 = command != "power"
value = 0
ctrl = 1

[State 310, 3]
type = ChangeState
trigger1 = power = [3995,3999]
trigger2 = power = 4000
value = 302
ctrl = 1

;-----
;Power Up
[Statedef 302]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 302

[State 1900, GoUpAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = Anim != 305
trigger1 = pos Y < 0
value = 305

[State 0, 4]
type = VarSet
trigger1 = time = 0
var(1) = 1

[State 300, power]
type = Explod
trigger1 = time = 0
anim = 4004 ;4002
ID = 4002
sprpriority = -1
bindtime = -1
removetime = -1
ownpal = 1

[State 300,end]
type = RemoveExplod
ID = 4001
trigger1 = (command != "power") || (life = 0) || time = 0

[State 300,end]
type = RemoveExplod
ID = 4002
trigger1 = (command != "power") || (life = 0)

[State 300,end]
type = RemoveExplod
ID = 4003
trigger1 = (command != "power") || (life = 0)

[State 310, 2]
type = poweradd
trigger1 = time >= 0
value = 7

[State 300,blink]
type = PalFX
triggerall = (Time >= 0) ;&& (Power < 4000)
trigger1 = (GameTime%10) = 0
time = 2
add = 64,64,64

[State 2000, 1]
type = EnvShake
trigger1 = TimeMod = 4,0
ampl = 8
time = 4

[State 310, 3]
type = ChangeState
trigger1 = command != "power"
value = 0
ctrl = 1

;------
;SSJ Power Up
[Statedef 303]
type    = S
movetype= A
physics = S
ctrl = 0
velset = 0,0,0
anim = 303

[State 1900, GoUpAnim]
type = ChangeAnim
triggerall = time = 0
trigger1 = Anim != 305
trigger1 = pos Y < 0
value = 305

[State 300, power]
type = Explod
trigger1 = time = 10
anim = 4004 ;4002
ID = 4002
sprpriority = -1
bindtime = -1
removetime = -1
ownpal = 1

[State 300,end]
type = RemoveExplod
ID = 4002
trigger1 = (command != "power") || (life = 0)

[State 300, lightning]
type = Explod
trigger1 = time = 10
anim = 4003
ID = 4003
sprpriority = 2
bindtime = -1
removetime = -1
ownpal = 1

[State 300,end]
type = RemoveExplod
ID = 4003
trigger1 = (command != "power") || (life = 0)

[State 310, 2]
type = poweradd
trigger1 = 10
value = 7

[State 300,blink]
type = PalFX
triggerall = (Time >= 0) 
trigger1 = (GameTime%10) = 0
time = 2
add = 64,64,64

[State 2000, 1]
type = EnvShake
trigger1 = TimeMod = 4,0
ampl = 8
time = 4

[State 310, 3]
type = ChangeState
trigger1 = command != "power"
value = 0
ctrl = 1

;---------------------------------------------------------------------------
;Ki Shot
[Statedef 1000]
type = S 
movetype= A 
physics = S 
;poweradd= -100 
ctrl = 0
velset = 0
anim = ifelse(Var(1),1003,1000) 

[State 1211, 1]
type = velset
trigger1 = (time >= 0) && (time <= 48)
x = 0
y = 0

;[State 4000, 1]
;type = PlaySnd 
;trigger1 = AnimElem = 1 
;value = 0,2 

[State 4000, 2]
type = Projectile 
trigger1 = AnimElem = 2 
projanim = ifelse(Var(1),1005,1002)
projhitanim = ifelse(Var(1),2001,2000)
offset = 37, -55 
velocity = 1, 0 
accel = ifelse(Var(1),0.5,0.3), 0
ID = 1000
getpower = 0
attr = S, SP
damage = ifelse(Var(1),20,6), ifelse(Var(1),10,3)
animtype = Medium 
pausetime = 0,9 
;sparkno = 0 
sparkxy = 10, 0 
hitsound = 5,3 
guardflag = MA 
guardsound = 6,0 
ground.type = Low 
ground.slidetime = 14 
ground.hittime = 16 
ground.velocity = -8 
air.animtype = Back 
air.velocity = -2.5,-5 
air.juggle = 3 
envshake.time = 5
envshake.freq = 30
envshake.ampl = -2

[State 4000, 4]
type = ChangeState
trigger1 = AnimTime = 0 && command !="holdc" && Var(3) != 1
value = 0
ctrl = 1

[State 4000, 4]
type = ChangeState
trigger1 = AnimTime = 0 && command ="holdc" && Var(3) != 1
value = 1001
ctrl = 1

[State 830, 2]
type=VarSet
trigger1 = power < 1
v=3
value=1

[State 830, 3]
type=ChangeState
trigger1=Var(3) = 1
trigger1=AnimTime = 0
value=5300

[State 4000, 5]
type = PowerAdd
trigger1 = Animelem = 2
value = -100 

;----------------------------
;charge
[Statedef 1001]
type = S
movetype = I
physics = S
anim = ifelse(Var(1),303,301) 
velset = 0,0
ctrl = 0

[State 2001, Turn]
type = Turn
Trigger1 = P2Dist X < 0

[State 1000:	PalFX]
type = PalFX
triggerall = (Time >= 0) && Var(4) < 300
trigger1 = (GameTime%25) = 0
time = 5
add = 64,64,64

[State 300,blink]
type = PalFX
triggerall = (Time >= 0) && Var(4) = 300
trigger1 = (GameTime%15) = 0
time = 6
add = 255,0,0

[State 300, 1]
type = EnvShake
;trigger1 = time = 0
trigger1 = TimeMod = 4,0 && var(4) > 0
ampl = 3
time = 4

[State 310,end0]
type = RemoveExplod
ID = 312
trigger1 = (command != "holdc") || (life = 0) || stateno != 4001

[State 310, energy]
type = Explod
trigger1 = Var(4) = 150
anim = 312
ID = 312
sprpriority = -1
bindtime = -1
removetime = -1
ownpal = 1

[State 4000, 2]
type = PlaySnd
trigger1 = Var(4) = 299
channel = 0
value = 8100, 6 ;4
volume = 255

[State 1001:	VarSet]
type			= VarSet
trigger1		= Time = 0 && Var(4) > 50
v			= 4
value			= 0

[State 1000:	VarAdd]
type = VarAdd
triggerall = Var(4) < 300
trigger1 = command = "holdc" 
v = 4
value	= 1

[State 1000:	ChangeState]
type = ChangeState
triggerall = command != "holdup" && command !="holddown"
trigger1 = (Var(4) = 300) && (command != "holdc")
value	= 1002
ctrl = 1

[State 1000:	ChangeState]
type = ChangeState
triggerall = command != "holdup" && command !="holddown"
triggerall = Time > 10
trigger1 = command != "holdc" && Var(4) < 300
value	= 1002




;[State 1000:	ChangeState]
;type = ChangeState
;triggerall = command = "holdup" && command != "holddown"
;triggerall = Time > 10
;trigger1 = command != "c3"
;trigger2 = Var(12) = 1 && P2bodydist X <= 50 && P2bodydist Y <= 10 && P2bodydist Y <= -10
;value	= 4004 ; UP

;[State 1000:	ChangeState]
;type = ChangeState
;triggerall = command != "holdup" && command = "holddown"
;triggerall = Time > 10
;trigger1 = command != "c3"
;trigger2 = Var(12) = 1 && P2bodydist X <= 50 && P2bodydist Y >= 10 && P2bodydist Y >= -10
;value	= 4005 ; Down
;---------------------------------------------------------------------------
;Dizzy/Tired
[Statedef 5300]
type = S
ctrl = 0
anim = ifelse(Var(1),3513,5300)
velset = 0,0

;[State 5300 , 3]
;type = PlaySnd
;trigger1 = Time = 1
;value = 0, 4

[State 5300,1]
type = VarSet
trigger1 = (Time >= 160) && (Var(3) = 1)
v = 3
value = 0

[State 1001:	VarSet]
type			= VarSet
triggerall        = PrevStateno = [1002,1002]
trigger1		= Time = 0
v			= 4
value			= 0

[State 8000:	VarSet]
type			= VarSet
triggerall        = PrevStateno = [8000,8000]
trigger1		= Time = 0
v			= 6
value			= 0

[State 0, 5]
type = ChangeState
trigger1 = Time = 200
;trigger1 = Pos Y = 0
value = 0
ctrl = 1
;---------------------------------------------------------------------------
; Override common states (use same number to override) :
;---------------------------------------------------------------------------
;---------------------------------------------------------------------------
;flying - start
[Statedef 1800]
type = A
movetype = A
physics = A
juggle  = 7
velset = 0, -8, 0
poweradd= 0
ctrl = 0
anim = ifelse(Var(1),1810,1800)

;[State 100, 1]
;type = AfterImage
;trigger1 = Time = 1
;trans = add 
;PalContrast =  200, 200, 200
;PalBright = 0,0,0
;time = 2

[State 100, 6]
type = AfterImage
triggerall = Var(1) != 1
trigger1 = Time = 0
trans = add
PalBright   = 0,0,0
PalContrast = 100,0,200
palpostbright = 100,0,200
PalAdd      = 0, 0, 0
PalMul      = .85,.85,.95
length = 20
time = 2

[State -2, AfterImage]
type = AfterImage
triggerall = Var(1) = 1
trigger1 = Time = 0
trans = add 
PalBright   =   30, 30,  0
palpostbright = 30, 30,  0
PalContrast =  140, 140, 40
PalAdd      = -10,-10,-10
PalMul      = .85,.85,.50
length = 20
time = 2

[State 100, 1]
type = AfterImageTime
trigger1 = Time >= 4
time = 2

[State 410, 4]
type = ChangeState
trigger1 = AnimTime = 0
value = 1900
ctrl = 1

;---------------------------------------------------------------------------
;Bukuu Jutsu
[Statedef 1900]
type = S
movetype = I
physics = N
ctrl = 0
anim = ifelse(Var(1),1910,1900)
velset = 0,0

[State 1900, para1]
type = VelSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Var(5) = 0
trigger2 = Pos Y < P2Dist Y - 700  ;Pos Y < -800 ;P2BodyDist Y - 500
trigger3 = Pos Y < -800
x = 0
y = 0

[State 1900, Block1]
type = ReversalDef
Trigger1 = command = "holdback"
reversal.attr = SCA, NA, SA, HA
pausetime = 0,15
hitsound = 6,0
p1stateno = 150

[State 1900, para2]
type = ChangeAnim
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Anim != ifelse(Var(1),1910,1900) ;1900
value = ifelse(Var(1),1910,1900) ;1900

[State 1900,fuwaVar(1)]
type = VarSet
trigger1 = command != "holdfwd"
trigger1 = command != "holdback"
trigger1 = command != "holdup"
trigger1 = command != "holddown"
trigger1 = Var(5) != 2
trigger2 = Var(5) = 2
trigger2 = Vel Y >= 2.4
v = 5
value = 1

[State 1900,fuwaVar(2)]
type = VarSet
trigger1 = Var(5) = 1
trigger1 = Vel Y <= -2.4
v = 5
value = 2

[State 1900,fuwaUp]
type = VelAdd
trigger1 = Var(5) = 1
y = -0.3

[State 1900,fuwaDown]
type = VelAdd
trigger1 = Var(5) = 2
y = 0.3

[State 1900,fuwaEnd]
type = VelSet
triggerall = Var(5) != 0
trigger1 = command = "holdfwd"
trigger2 = command = "holdback"
trigger3 = command = "holdup"
trigger4 = command = "holddown"
y = 0

[State 1900,fuwaEndVar]
type = VarSet
trigger1 = command = "holdfwd"
trigger2 = command = "holdback"
trigger3 = command = "holdup"
trigger4 = command = "holddown"
v = 5
value = 0

[State 2000, VarSet]
type = VarSet
trigger1 = time = 0
var(9) = 1

[State 1900, UpBorder]
type = PosSet
trigger1 = Pos Y < -770 ;Pos Y > P2Dist Y - 300 ;Pos Y < -770 
trigger2 = Pos Y < P2Dist Y - 300 
y = P2BodyDist Y - 300  ;ScreenPos Y - 120  -770 ; 

;[State 1900, UpBorder]
;type = PosSet
;trigger1 = Pos Y < -200
;y = -200

[State 1900, GoDown1]
type = VelAdd
trigger1 = command = "holddown"
y = 0.3

[State 1900,GoDown2]
type = VelSet
trigger1 = command = "holddown"
trigger1 = Vel Y < 0 
y = 0

[State 1900, GoUpAnim]
type = ChangeAnim
trigger1 = Anim != ifelse(Var(1),1914,1904) ;1904
trigger1 = command = "holddown"
value = ifelse(Var(1),1914,1904) ;1904

[State 1900, GoUp1]
type = VelAdd
trigger1 = command = "holdup"
y = -0.3

[State 1900,GoUp2]
type = VelSet
trigger1 = command = "holdup"
trigger1 = Vel Y > 0 
y = 0

[State 1900, GoUpAnim]
type = ChangeAnim
trigger1 = Anim != ifelse(Var(1),1913,1903) ;1903
trigger1 = command = "holdup"
value = ifelse(Var(1),1913,1903) ;1903

[State 1900, GoBack1]
type = VelAdd
trigger1 = command = "holdback"
x = -0.3

[State 1900,GoBack2]
type = VelSet
trigger1 = command = "holdback"
trigger1 = Vel X > 0 
x = 0

[State 1900, GoBackAnim]
type = ChangeAnim
triggerall = Anim != ifelse(Var(1),1912,1902) ;1902
trigger1 = command = "holdback"
;trigger2 = command = "holddown"
value = ifelse(Var(1),1912,1902) ;1902

[State 1900, GoFwd1]
type = VelAdd
trigger1 = command = "holdfwd"
x = 0.3

[State 1900,GoFwd2]
type = VelSet
trigger1 = command = "holdfwd"
trigger1 = Vel X < 0 
x = 0

[State 1900, GoFwdAnim]
type = ChangeAnim
trigger1 = Anim != ifelse(Var(1),1911,1901) ;1901
trigger1 = command = "holdfwd"
value = ifelse(Var(1),1911,1901) ;1901

[State 1900,Turn]
type = Turn
trigger1 = P2bodydist X < -30

[State 1900,Land]
type = ChangeState
trigger1 = Pos Y >= 0
value = 50
ctrl = 1

[State 1900, GoUpAnim]
type = ChangeAnim
trigger1 = Anim != ifelse(Var(1),1915,1905) ;1905
trigger1 = command = "holdfwd" && (command = "holdup" || command = "holddown")
value = ifelse(Var(1),1915,1905) ;1905

[State 1900, GoUpAnim]
type = ChangeAnim
trigger1 = Anim != ifelse(Var(1),1916,1906) ;1906
trigger1 = command = "holdback" && (command = "holdup" || command = "holddown")
value = ifelse(Var(1),1916,1906) ;1906

;[State 1900,Land]
;type = ChangeState
;trigger1 = Anim = 50
;value = 0
;ctrl = 1


[State 1900, Dust]
type = MakeDust
trigger1 = pos Y > -20 
pos = -25, 15 
pos2 = -10, 15
spacing = 6

[State 1900, Dust2]
type = MakeDust
trigger1 = pos Y > -20 
pos = 25, 15 
pos2 = 10, 15
spacing = 4



;[State 3001,Win-Lose]
;type = ChangeState
;trigger1 = Win = 1
;trigger2 = Lose = 1
;value = 50

[State 1900, Guard]
type = ChangeState
triggerall = P2Bodydist X <= 120
triggerall = P2BodyDist Y >= -120 && P2BodyDist Y < 70
triggerall = P2MoveType = A
trigger1 = Command = "holdback"
value = 130

[State 3001,Win]
type = ChangeState
trigger1 = Win = 1
value = 50

[State 3001,Lose]
type = ChangeState
trigger1 = Lose = 1 || ((life = 0) && (movetype = H))
value = 5030

;---------------------------------------------------------------------------------------------------------
;Bug Correct/Special Effects
[Statedef -2]

[State -2, 1]
type = lifeadd
trigger1 = time = 0
trigger1 = roundstate = 4 && life = 1000
value = -1

[State -2, 2]
type = RemoveExplod
ID = 8100
trigger1 = command != "holdc" || Var(2) = 300 || stateno != 8100

[State -2, 3]
type = RemoveExplod
ID = 4001
triggerall = (command != "power") || (life = 0) || movetype = H
trigger1 = stateno != 301 || stateno != 302 || stateno != 303

[State -2, 4]
type = RemoveExplod
ID = 4002
triggerall = (command != "power") || (life = 0) || movetype = H
trigger1 = stateno != 301 || stateno != 302 || stateno != 303

[State -2, 5]
type = RemoveExplod
ID = 4003
triggerall = (command != "power") || (life = 0) || movetype = H
trigger1 = stateno != 301 || stateno != 302 || stateno != 303

;power up
[State -2, 6]
type=PlaySnd
trigger1 = AnimElem = 2 , = 1 && stateno = 301
trigger2 = AnimElem = 3 , = 1 && stateno = 302 
trigger3 = AnimElem = 1 , = 1 && stateno = 303
value = 301,1
volume = 255

[State -2:	VarSet]
type			= VarSet
triggerall        = PrevStateno = [1002,1002]
trigger1		= movetype = H
v			= 4
value			= 0

[State -2:	VarSet]
type			= VarSet
triggerall        = PrevStateno = [8000,8000]
trigger1		= movetype = H
v			= 6
value			= 0

;[State -2, 7]
;type=PlaySnd
;trigger1 = (stateno = 2500) && (AnimElem = 1, = 1)
;value=2500,3
;volume=220

[state -2]
type = attackmulset ;multiplies attack
trigger1 = Var(1) = 1 
value = 2 ;by 2

[state -2]
type = defencemulset 
trigger1 = Var(1) = 1 
value = 6
;---------------------------------------------------------------------------------------------------------

